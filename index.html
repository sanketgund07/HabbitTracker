
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Food and Habit Tracker for Pratiksha ❤️</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0"
  }
}
</script>
</head>
  <body class="bg-gray-900 text-gray-200">
    <div id="root"></div>
    <script type="text/babel" data-type="module">
      import React, { useState, useMemo, useEffect } from 'react';
      import ReactDOM from 'react-dom/client';
      import { GoogleGenAI, Type } from "@google/genai";

      // --- Start of Polyfills ---
      // Polyfill crypto.randomUUID for environments where it might not be available
      if (typeof crypto.randomUUID === 'undefined') {
        crypto.randomUUID = () => {
          return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
          );
        };
      }
      // --- End of Polyfills ---

      // --- Start of hooks/useLocalStorage.ts ---
      function useLocalStorage(key, initialValue) {
        const [storedValue, setStoredValue] = useState(() => {
          try {
            const item = window.localStorage.getItem(key);
            return item ? JSON.parse(item) : initialValue;
          } catch (error) {
            console.error(error);
            return initialValue;
          }
        });

        useEffect(() => {
          try {
            const valueToStore =
              typeof storedValue === 'function'
                ? storedValue(storedValue)
                : storedValue;
            window.localStorage.setItem(key, JSON.stringify(valueToStore));
          } catch (error) {
            console.error(error);
          }
        }, [key, storedValue]);

        return [storedValue, setStoredValue];
      }
      // --- End of hooks/useLocalStorage.ts ---

      // --- Start of services/geminiService.ts ---
      const nutritionSchema = {
        type: Type.OBJECT,
        properties: {
          calories: { type: Type.NUMBER, description: 'Estimated total calories.' },
          protein: { type: Type.NUMBER, description: 'Estimated total protein in grams.' },
          vitamins: { type: Type.STRING, description: 'List of key vitamins found in the meals.' },
          others: { type: Type.STRING, description: 'Other notable nutritional information.' },
          junkFoodWarning: { type: Type.STRING, description: 'A note identifying any junk food or high-calorie items. If none, this should be an empty string.' },
          calorieFeedback: { type: Type.STRING, description: 'A note on whether the calorie intake is appropriate for the user\'s goal of gaining weight, based on their height and weight. If intake is low, provide encouragement. If it\'s good, be positive.' },
        },
        required: ['calories', 'protein', 'vitamins', 'others', 'junkFoodWarning', 'calorieFeedback'],
      };

      async function analyzeNutrition(foodLog, userProfile, apiKey) {
        if (!apiKey) {
          throw new Error("API Key is missing.");
        }
        const ai = new GoogleGenAI({ apiKey });
        
        const prompt = `
          Analyze the nutritional content of the following meals for a person who is ${userProfile.height} cm tall and weighs ${userProfile.weight} kg.
          Their goal is to gain weight.
          Breakfast: ${foodLog.breakfast}
          Lunch: ${foodLog.lunch}
          Dinner: ${foodLog.dinner}
          Snacks: ${foodLog.snacks}
          
          Based on this information:
          1. Estimate the total calories and protein.
          2. List the key vitamins.
          3. Note any other significant nutritional aspects.
          4. Specifically point out any items that are considered junk food or are particularly high in unhealthy calories. If there are none, leave the note empty.
          5. Provide feedback on the calorie intake. If it seems low for someone trying to gain weight, gently mention it and offer encouragement.

          Return the response as a single JSON object.
        `;

        try {
          const response = await ai.models.generateContent({
            model: "gemini-2.5-flash",
            contents: prompt,
            config: {
              responseMimeType: "application/json",
              responseSchema: nutritionSchema,
            },
          });

          const jsonStr = response.text.trim();
          const nutritionInfo = JSON.parse(jsonStr);
          return nutritionInfo;

        } catch (error) {
          console.error("Error analyzing nutrition:", error);
          throw error;
        }
      }
      // --- End of services/geminiService.ts ---

      // --- Start of components/Icons.tsx ---
      const commonProps = {
        width: "24",
        height: "24",
        viewBox: "0 0 24 24",
        fill: "none",
        stroke: "currentColor",
        strokeWidth: "2",
        strokeLinecap: "round",
        strokeLinejoin: "round",
      };

      const ChecklistIcon = () => (
        <svg {...commonProps}><path d="M9 5H3V3h6v2Zm12 2H3v2h18V7Zm-4 4H3v2h14v-2Zm-3 4H3v2h11v-2Z"/><path d="m22 5-3-3-1 1 3 3 1-1Z"/><path d="m19 12-1 1 3 3 1-1-3-3Z"/></svg>
      );

      const DashboardIcon = () => (
        <svg {...commonProps}><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
      );

      const FoodIcon = () => (
        <svg {...commonProps}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v2"/><path d="M12 11v11"/><path d="M16 11a1 1 0 1 0 2 0v-1a1 1 0 1 0-2 0v1zm-2-5a1 1 0 1 0 2 0V5a1 1 0 1 0-2 0v1zm6-1a1 1 0 1 0 2 0V4a1 1 0 1 0-2 0v1z"/></svg>
      );

      const NutritionIcon = () => (
          <svg {...commonProps}><path d="M19.8 18.2a1 1 0 0 1 .6 1.3l-2.1 4.4a1 1 0 0 1-1.3.6l-4.4-2.1a1 1 0 0 1-.6-1.3l2-4.4a1 1 0 0 1 1.3-.6Z"/><path d="M12 12a5 5 0 1 1 5 5"/><path d="M12 12a5 5 0 1 0 5 5"/><path d="m14 4 3 3"/><path d="m4.9 4.9 2.1 2.1"/><path d="M4 14l3-3"/><path d="m15.1 18.1 2.1-2.1"/></svg>
      );

      const ProfileIcon = () => (
          <svg {...commonProps}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      );

      const PlusIcon = () => (
          <svg {...commonProps}><path d="M5 12h14"/><path d="M12 5v14"/></svg>
      );

      const TrashIcon = () => (
          <svg {...commonProps} className="w-5 h-5"><path d="M3 6h18"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
      );

      const WarningIcon = () => (
        <svg {...commonProps} className="w-5 h-5 text-amber-400"><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" /><path d="M12 9v4" /><path d="M12 17h.01" /></svg>
      );

      const InfoIcon = () => (
        <svg {...commonProps} className="w-5 h-5 text-sky-400"><circle cx="12" cy="12" r="10" /><path d="M12 16v-4" /><path d="M12 8h.01" /></svg>
      );

      const LoadingSpinner = () => (
        <svg
          className="animate-spin h-5 w-5 text-white"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            className="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            strokeWidth="4"
          ></circle>
          <path
            className="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          ></path>
        </svg>
      );
      // --- End of components/Icons.tsx ---

      // --- Start of components/Calendar.tsx ---
      const Calendar = ({ selectedDate, onDateChange, markedDates = {} }) => {
        const [currentMonth, setCurrentMonth] = useState(new Date(selectedDate.getFullYear(), selectedDate.getMonth(), 1));

        useEffect(() => {
          setCurrentMonth(new Date(selectedDate.getFullYear(), selectedDate.getMonth(), 1));
        }, [selectedDate]);

        const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

        const firstDayOfMonth = currentMonth.getDay();
        const daysInMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0).getDate();

        const changeMonth = (offset) => {
          setCurrentMonth(prev => new Date(prev.getFullYear(), prev.getMonth() + offset, 1));
        };

        const toISODateString = (date) => date.toISOString().split('T')[0];

        const renderDays = () => {
          const days = [];
          for (let i = 0; i < firstDayOfMonth; i++) {
            days.push(<div key={`empty-start-${i}`} className="w-10 h-10"></div>);
          }
          for (let day = 1; day <= daysInMonth; day++) {
            const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);
            const isoDate = toISODateString(date);
            const isSelected = toISODateString(selectedDate) === isoDate;
            const isToday = toISODateString(new Date()) === isoDate;
            const marker = markedDates[isoDate];

            const dayClasses = `
              w-10 h-10 flex items-center justify-center rounded-full cursor-pointer transition-all duration-300 relative group
              ${isSelected ? 'bg-teal-500 text-white font-bold' : 'hover:bg-teal-500/20'}
              ${isToday && !isSelected ? 'border-2 border-teal-500' : ''}
            `;

            days.push(
              <div key={day} className={dayClasses} onClick={() => onDateChange(date)}>
                {day}
                {marker && (
                  <div
                    className="absolute bottom-1 w-2 h-2 rounded-full"
                    style={{ backgroundColor: marker.color }}
                  ></div>
                )}
                {marker?.tooltip && (
                   <div className="absolute -top-10 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-gray-800 text-white text-xs rounded-md opacity-0 group-hover:opacity-100 transition-opacity z-10 pointer-events-none">
                    {marker.tooltip}
                  </div>
                )}
              </div>
            );
          }
          return days;
        };

        return (
          <div className="bg-gray-800/50 backdrop-blur-md p-4 rounded-2xl border border-white/10 shadow-lg">
            <div className="flex justify-between items-center mb-4">
              <button onClick={() => changeMonth(-1)} className="p-2 rounded-full hover:bg-white/10 transition-colors">&lt;</button>
              <div className="font-bold text-lg">
                {currentMonth.toLocaleString('default', { month: 'long', year: 'numeric' })}
              </div>
              <button onClick={() => changeMonth(1)} className="p-2 rounded-full hover:bg-white/10 transition-colors">&gt;</button>
            </div>
            <div className="grid grid-cols-7 gap-2 text-center text-sm text-gray-400">
              {daysOfWeek.map(day => <div key={day} className="font-semibold">{day}</div>)}
            </div>
            <div className="grid grid-cols-7 gap-2 mt-2">
              {renderDays()}
            </div>
          </div>
        );
      };
      // --- End of components/Calendar.tsx ---

      // --- Start of App.tsx ---
      const GlassmorphicCard = ({ children, className }) => (
        <div className={`bg-gray-800/50 backdrop-blur-md p-6 rounded-2xl border border-white/10 shadow-lg ${className}`}>
          {children}
        </div>
      );
      
      const NavItem = ({ tab, activeTab, setActiveTab, icon, label }) => (
        <button
          onClick={() => setActiveTab(tab)}
          className={`flex-1 flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-300 ${activeTab === tab ? 'text-teal-400' : 'text-gray-400 hover:bg-white/5'}`}
        >
          {icon}
          <span className="text-xs mt-1">{label}</span>
        </button>
      );

      const App = () => {
        const [activeTab, setActiveTab] = useState('checklist');
        const [selectedDate, setSelectedDate] = useState(new Date());
        
        const [checklistItems, setChecklistItems] = useLocalStorage('checklistItems', [{ id: '1', text: 'Drink 8 glasses of water' }, { id: '2', text: '30 minutes of exercise' }]);
        const [newChecklistItem, setNewChecklistItem] = useState('');

        const [completedHabits, setCompletedHabits] = useLocalStorage('completedHabits', {});
        const [foodLogs, setFoodLogs] = useLocalStorage('foodLogs', {});
        const [nutritionData, setNutritionData] = useLocalStorage('nutritionData', {});
        const [userProfile, setUserProfile] = useLocalStorage('userProfile', { height: '', weight: '' });
        const [apiKey, setApiKey] = useLocalStorage('gemini-api-key', '');
        
        const [isAnalyzing, setIsAnalyzing] = useState(false);
        
        const toISODateString = (date) => date.toISOString().split('T')[0];
        const selectedDateISO = toISODateString(selectedDate);

        const currentFoodLog = useMemo(() => foodLogs[selectedDateISO] || { breakfast: '', lunch: '', dinner: '', snacks: '' }, [foodLogs, selectedDateISO]);
        const currentNutritionInfo = useMemo(() => nutritionData[selectedDateISO] || null, [nutritionData, selectedDateISO]);

        const handleDateChange = (date) => {
          setSelectedDate(date);
        };

        const addChecklistItem = () => {
          if (newChecklistItem.trim()) {
            setChecklistItems([...checklistItems, { id: crypto.randomUUID(), text: newChecklistItem.trim() }]);
            setNewChecklistItem('');
          }
        };

        const deleteChecklistItem = (id) => {
          setChecklistItems(checklistItems.filter(item => item.id !== id));
          const newCompletedHabits = { ...completedHabits };
          Object.keys(newCompletedHabits).forEach(date => {
            delete newCompletedHabits[date][id];
          });
          setCompletedHabits(newCompletedHabits);
        };

        const toggleHabitCompletion = (itemId) => {
          const dateKey = selectedDateISO;
          setCompletedHabits(prev => {
              const dayCompletions = prev[dateKey] || {};
              return {
                  ...prev,
                  [dateKey]: {
                      ...dayCompletions,
                      [itemId]: !dayCompletions[itemId],
                  },
              };
          });
        };

        const handleFoodLogChange = (e) => {
          const { name, value } = e.target;
          setFoodLogs(prevFoodLogs => {
            const logForDate = prevFoodLogs[selectedDateISO] || { breakfast: '', lunch: '', dinner: '', snacks: '' };
            const updatedLogForDate = { ...logForDate, [name]: value };
            return {
              ...prevFoodLogs,
              [selectedDateISO]: updatedLogForDate,
            };
          });
        };

        const handleAnalyzeNutrition = async () => {
            if (!apiKey) {
                alert("Please enter your Gemini API key in the Profile tab.");
                setActiveTab('profile');
                return;
            }
            if (!userProfile.height || !userProfile.weight) {
                alert("Please complete your profile (height and weight) before analyzing nutrition.");
                setActiveTab('profile');
                return;
            }
          
            const foodLogForDay = foodLogs[selectedDateISO];
            if (!foodLogForDay || Object.values(foodLogForDay).every(val => val.trim() === '')) {
                alert("Please log some food before analyzing nutrition.");
                return;
            }

            setIsAnalyzing(true);
            try {
                const result = await analyzeNutrition(foodLogForDay, userProfile, apiKey);
                if (result) {
                    setNutritionData({ ...nutritionData, [selectedDateISO]: result });
                }
            } catch (error) {
                console.error("Error analyzing nutrition:", error);
                alert("An error occurred while analyzing nutrition. The AI service may be temporarily unavailable or there might be an issue with your API key. Please check the console for more details.");
            } finally {
                setIsAnalyzing(false);
            }
        };
        
        const handleProfileChange = (e) => {
          const { name, value } = e.target;
          setUserProfile(prev => ({ ...prev, [name]: value }));
        };
        
        const renderTabContent = () => {
          switch (activeTab) {
            case 'checklist':
              return (
                <div className="space-y-6">
                  <GlassmorphicCard>
                    <h2 className="text-xl font-bold mb-4">Add Habit</h2>
                    <div className="flex gap-2">
                      <input type="text" value={newChecklistItem} onChange={e => setNewChecklistItem(e.target.value)} placeholder="e.g. Meditate for 10 minutes" className="w-full bg-gray-700/50 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500" />
                      <button onClick={addChecklistItem} className="bg-teal-500 hover:bg-teal-600 transition-colors font-bold p-2 rounded-lg"><PlusIcon/></button>
                    </div>
                  </GlassmorphicCard>
                  <GlassmorphicCard>
                      <Calendar selectedDate={selectedDate} onDateChange={handleDateChange} />
                  </GlassmorphicCard>
                  <GlassmorphicCard>
                    <h2 className="text-xl font-bold mb-4">Today's Habits ({selectedDate.toLocaleDateString()})</h2>
                    <ul className="space-y-3">
                      {checklistItems.map(item => (
                        <li key={item.id} className="flex items-center justify-between bg-gray-700/30 p-3 rounded-lg">
                          <div className="flex items-center gap-3 cursor-pointer" onClick={() => toggleHabitCompletion(item.id)}>
                            <input type="checkbox" readOnly checked={!!completedHabits[selectedDateISO]?.[item.id]} className="w-5 h-5 rounded bg-gray-600 border-gray-500 text-teal-500 focus:ring-teal-600" />
                            <span>{item.text}</span>
                          </div>
                          <button onClick={() => deleteChecklistItem(item.id)} className="text-gray-500 hover:text-red-400"><TrashIcon/></button>
                        </li>
                      ))}
                    </ul>
                  </GlassmorphicCard>
                </div>
              );
            case 'dashboard':
              const stats = checklistItems.map(item => {
                  const totalDays = Object.values(completedHabits).filter(day => day[item.id]).length;
                  return { ...item, count: totalDays };
              });
              return (
                <GlassmorphicCard>
                  <h2 className="text-xl font-bold mb-4">Habit Dashboard</h2>
                  <div className="space-y-4">
                    {stats.map(item => (
                      <div key={item.id}>
                        <div className="flex justify-between items-baseline mb-1">
                          <p className="font-semibold">{item.text}</p>
                          <p className="text-sm text-gray-300 font-medium">{item.count} / 30</p>
                        </div>
                        <div className="w-full bg-gray-700 rounded-full h-2.5">
                          <div className="bg-gradient-to-r from-teal-500 to-cyan-500 h-2.5 rounded-full" style={{ width: `${(item.count / 30) * 100}%` }}></div>
                        </div>
                      </div>
                    ))}
                  </div>
                </GlassmorphicCard>
              );
            case 'food':
              return (
                <div className="space-y-6">
                  <GlassmorphicCard>
                    <Calendar selectedDate={selectedDate} onDateChange={handleDateChange} />
                  </GlassmorphicCard>
                  <GlassmorphicCard>
                    <h2 className="text-xl font-bold mb-4">Food Log for {selectedDate.toLocaleDateString()}</h2>
                    <div className="space-y-4">
                      {['breakfast', 'lunch', 'dinner', 'snacks'].map(meal => (
                          <div key={meal}>
                              <label htmlFor={meal} className="block mb-2 text-sm font-medium capitalize">{meal}</label>
                              <input
                                  type="text"
                                  id={meal}
                                  name={meal}
                                  value={currentFoodLog[meal]}
                                  onChange={handleFoodLogChange}
                                  placeholder={`What did you have for ${meal}?`}
                                  className="w-full bg-gray-700/50 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500"
                              />
                          </div>
                      ))}
                    </div>
                  </GlassmorphicCard>
                </div>
              );
            case 'nutrition':
               return (
                <GlassmorphicCard>
                  <h2 className="text-xl font-bold mb-4">Nutrition Analysis for {selectedDate.toLocaleDateString()}</h2>
                  <button
                    onClick={handleAnalyzeNutrition}
                    disabled={isAnalyzing}
                    className="w-full bg-teal-500 hover:bg-teal-600 disabled:bg-teal-800 disabled:cursor-not-allowed transition-colors font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 mb-6"
                  >
                    {isAnalyzing ? <><LoadingSpinner/> Analyzing...</> : "Analyze Today's Food"}
                  </button>

                  {currentNutritionInfo ? (
                    <div className="space-y-4">
                      <div className="grid grid-cols-2 gap-4 text-center">
                          <div className="bg-gray-700/30 p-4 rounded-lg">
                              <p className="text-2xl font-bold text-teal-400">{currentNutritionInfo.calories}</p>
                              <p className="text-sm text-gray-400">Calories</p>
                          </div>
                          <div className="bg-gray-700/30 p-4 rounded-lg">
                              <p className="text-2xl font-bold text-teal-400">{currentNutritionInfo.protein}g</p>
                              <p className="text-sm text-gray-400">Protein</p>
                          </div>
                      </div>
                      {currentNutritionInfo.junkFoodWarning && (
                        <div className="bg-amber-500/10 border border-amber-500/20 text-amber-300 p-3 rounded-lg flex items-start gap-3">
                          <WarningIcon />
                          <div>
                            <h3 className="font-semibold">Health Note</h3>
                            <p className="text-sm">{currentNutritionInfo.junkFoodWarning}</p>
                          </div>
                        </div>
                      )}
                      {currentNutritionInfo.calorieFeedback && (
                        <div className="bg-sky-500/10 border border-sky-500/20 text-sky-300 p-3 rounded-lg flex items-start gap-3">
                          <InfoIcon />
                          <div>
                            <h3 className="font-semibold">Calorie Goal Note</h3>
                            <p className="text-sm">{currentNutritionInfo.calorieFeedback}</p>
                          </div>
                        </div>
                      )}
                       <div className="bg-gray-700/30 p-4 rounded-lg">
                          <h3 className="font-semibold mb-2">Vitamins & Others</h3>
                          <p className="text-sm text-gray-300"><strong>Vitamins:</strong> {currentNutritionInfo.vitamins}</p>
                          <p className="text-sm text-gray-300"><strong>Others:</strong> {currentNutritionInfo.others}</p>
                      </div>
                    </div>
                  ) : (
                    <p className="text-center text-gray-400">No analysis available. Log your food and click the button above.</p>
                  )}
                </GlassmorphicCard>
              );
            case 'profile':
              return (
                  <GlassmorphicCard>
                      <h2 className="text-xl font-bold mb-4">Your Profile</h2>
                      <div className="space-y-6">
                          <div>
                              <label htmlFor="apiKey" className="block mb-2 text-sm font-medium">Gemini API Key</label>
                              <input
                                  type="password" id="apiKey" name="apiKey"
                                  value={apiKey} onChange={(e) => setApiKey(e.target.value)}
                                  className="w-full bg-gray-700/50 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500"
                                  placeholder="Enter your Gemini API key"
                              />
                               <p className="mt-2 text-xs text-gray-400">Your key is stored in your browser's local storage and is not sent anywhere else.</p>
                          </div>
                          <div>
                              <label htmlFor="height" className="block mb-2 text-sm font-medium">Height (cm)</label>
                              <input
                                  type="number" id="height" name="height"
                                  value={userProfile.height} onChange={handleProfileChange}
                                  className="w-full bg-gray-700/50 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500"
                                  placeholder="e.g. 165"
                              />
                          </div>
                          <div>
                              <label htmlFor="weight" className="block mb-2 text-sm font-medium">Weight (kg)</label>
                              <input
                                  type="number" id="weight" name="weight"
                                  value={userProfile.weight} onChange={handleProfileChange}
                                  className="w-full bg-gray-700/50 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500"
                                  placeholder="e.g. 55"
                              />
                          </div>
                          <p className="text-xs text-gray-400">This information helps the AI provide personalized feedback for your health goals.</p>
                      </div>
                  </GlassmorphicCard>
              );
            default:
              return null;
          }
        };

        return (
          <div className="bg-gray-900 text-gray-200 min-h-screen font-sans">
            <div className="container mx-auto max-w-lg p-4 pb-24">
              <header className="text-center my-6">
                <h1 className="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-teal-400 to-cyan-500">
                  Food & Habit Tracker
                </h1>
                <p className="text-gray-400">For Pratiksha ❤️</p>
              </header>

              <main>{renderTabContent()}</main>

              <nav className="fixed bottom-0 left-0 right-0 max-w-lg mx-auto bg-gray-800/70 backdrop-blur-lg border-t border-white/10 p-2 flex justify-around">
                <NavItem tab="checklist" icon={<ChecklistIcon />} label="Habits" activeTab={activeTab} setActiveTab={setActiveTab} />
                <NavItem tab="dashboard" icon={<DashboardIcon />} label="Stats" activeTab={activeTab} setActiveTab={setActiveTab} />
                <NavItem tab="food" icon={<FoodIcon />} label="Food" activeTab={activeTab} setActiveTab={setActiveTab} />
                <NavItem tab="nutrition" icon={<NutritionIcon />} label="AI Nutrition" activeTab={activeTab} setActiveTab={setActiveTab} />
                <NavItem tab="profile" icon={<ProfileIcon />} label="Profile" activeTab={activeTab} setActiveTab={setActiveTab} />
              </nav>
            </div>
          </div>
        );
      };
      // --- End of App.tsx ---

      // --- Start of index.tsx ---
      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }

      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
      // --- End of index.tsx ---
    </script>
  </body>
</html>
